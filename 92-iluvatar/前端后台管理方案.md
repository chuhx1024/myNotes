# 隐私计算平台前端方案


## 项目名称
- xx隐私计算平台 FrontEnd

## 项目内容
- 区分数据源, 应用方的隐私计算产品, 包括数据上传, 求交, 任务发起, 订单管理, 计价策略, 权限管理

## 技术栈
- Vue2.0 + Vuex + Vue-router + Antd-vue + Axios + Echarts + Nginx + Docker

## 前期项目框架搭建
- 项目初始化使用 Vue2 官方 cli 脚手架搭建 
    - 自动生成 前端项目基础目录 
    - 自动集成 前端JS规范 EsList 
    - 自动集成 前端样式css处理器 Less
    - 自动集成 前端路由 VueRoute
    - 自动集成 前端全局变量管理工具 VueX(按基础模块划分)
    - 托管到 hub 服务器

## 项目整体风格确定
- 根据项目原型图的交互逻辑 业务逻辑 调研 两套企业级 前端 UI 组件库(antd-vue, element-UI)
- 和项目经理 产品经理 UI设计师 共同讨论 最终确定一套 UI 组件库(antd-vue)
- 基于 antd-vue 组件库 结合公司产品风格 统一修改了 组件库的默认样式(全局主色, 常用按钮大小 弹窗位置等)

## 项目整体布局开发 & 项目公共组件抽离封装;
- 确认项目的主要布局方式 开发通用布局组件
    - 弹窗
    - msg提示
    - 详情组件
    - 上搜索下列表组件
    - 表单提交组 FormGruop 组件
    - 筛选组  FilterGrid 组件

- 开发通用功能组件
    - csv文件上传组件(文件大小,格式,内容解析校验; 文件局部预览; 自己暴露属性,方法等; )
    - 删除前 double check 强提醒大弹窗组件封装;
    - 全局通用 字典组件开发
    - 字体图标组件封装(集成阿里iconFont, 本地svg图片)
    - 空组件 EmptyCom 组件
    - 自定义徽标组件


## 封装全局公共方法
- 封装 Http 方法 axios 配置全局 Token 登录过期自动转跳登录 无权限报错提醒
- 封装 全局过滤器 处理 日期格式等数据
- 一般文件下载通用方法: blob 方式 同时做兼容 IE浏览器处理
- 大文件 切片下载方法: 合并buffer方式
- .pdf 文件预览方法封装
- 16进制颜色 转 16进制 + 透明度 通用方法封装
- WebSocket方法封装: 支持自定义重连次数, 自定义重连间隔时间, 自动打开, 兼容ie9
- 操作浏览器 cookies 方法封装: 为了统一便于维护
- 其他全局方法封装: 节流 防抖 拷贝等;


## 权限节点开发, 包括角色添加定义, 动态路由生成 前端登录保持;
- 项目为了权限添加了 用户管理 角色管理  部门管理 管理节点  并且配置 超级管理员和一些预制角色(建模工程师, 运维工程师, 项目工程师, 数据管理工程师等)
- 用户登录成功后 后端会返回 该用户的权限 code 集合
- 前端根据 code 动态渲染项目侧边导航 前端页面路由 实现页面级别权限控制

## IE11 兼容处理;
- table 样式兼容性
- 文件下载 blob 方式 IE不支持问题
- webSocket IE 连接不成功问题
- flex布局 IE 不支持问题

## 项目关键节点逻辑
### 数据管理节点
- 平台通过数据管理模块，可通过数据名称、状态、添加时间进行数据列表的方式进行数据查询，也可支持数据新增和查询重置
- 数据中心为用户提供导人用于联邦建模、模型预测的本地数据的功能，建立结构化数据存储
- 数据源方导入数据集,发布数据描述信息,供应用方申请
- 已发布数据下可包含多个数据版本
- 数据描述中的匹配键信息、加密方式、数据时间、特征信息等

### 建模任务流程
- 数据上传，应用方数据上传格式:ID.回溯时间,特征，数据源方:ID.特1.征，DMS 原样存储;
- 全量 ID 准备，各方只取第一个回溯表的全量 ID 集，去重;
- 第一次求交，
- 特征数据集准备
- 第二次求交，;
- 结果融合，文件为多回溯时，进行结果融合形成衍生数据选择衍生数据
- 选择衍生数据 
- 特征工程
- 模型训练

### 模型中心
- 模型中心作为模型存储仓库，用户在建模任务中将效果好的模型保存到模型中心，可对多个模型进行效果对比，并提供给在服务中心上线在线预测服务
- 基本流程: 列表查看已保存模型基本信息，点击进入详情查看模型评估报告和建模任务信息横刑列差





