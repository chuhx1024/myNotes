# 服务端渲染

### 不使用服务端渲染的坏处
- SPA 首屏加载时间长
- 不利于 SEO

### 什么是渲染
- 渲染: 把数据 + 模板 拼接到一起

### 传统的服务端渲染
- 概念
    - 客户端请求一个地址
    - 服务端: 查询页面需要的数据(从数据库) 
    - 服务端: 将数据和 模板结合  生成 html  
    - 服务端: 将 html 返给 客户端
    - 用户看到页面
- 缺点
    - 前后端代码耦合 不利于开发维护
    - 前端没有足够的发挥空间
    - 服务器压力大
    - 用户体验一般

### 客户端渲染(csr)
- 概念
    - 客户端请求一个地址
    - 服务端: 返回一个空白的 html 模板 
    - 客户端: 发送 ajax 请求 
    - 服务端: 查询数据库
    - 客户端: 接收到数据 动态渲染 页面
- 缺点
    - 首屏 渲染慢 (第一层 页面请求  第二层 数据请求 第三层渲染)
    - 不利于 SEO()

### 现代的服务端渲染(同构渲染 = 后端渲染 + 前端渲染)

- 概念
    - 客户端请求一个地址
    - 服务端: 查询页面需要的数据(从数据库) 渲染页面 生成 客户端的 SPA脚本
    - 客户端: 直接呈现页面
    - 客户端: 通过页面中的脚本 激活 SPA 应用
    - 之后的页面交互都是 客户端渲染
- 实现方式
    - Vue 和 React 等框架都有官方解决方案
    - 但是很麻烦
    - 需要搭建 环境
- 较好的实现方式
    - React 生态的 Next.js
    - Vue 生态的 Nuxt.js
- 缺点
    - 某些第三方库 需要处理下才能使用  
    - 写某些代码 要区分环境  比如 使用 window 会报错  需要些 if
    - 部署 只能是 node 环境 因为要起 node de server
    - 相比于 部署静态页面  需要更多的占用 CPU 资源
    - 如果是高流量环境下使用 需要准备相应的服务器负载

### 使用现代服务端渲染的建议
- 首屏渲染速度是否真的重要
- 是否真的需要 SEO
- 做官网必备





