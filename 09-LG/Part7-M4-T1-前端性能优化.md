### 前端性能优化
#### 基础概念
- 什么是 web 性能
    - 打开速度
    - 动画效果
    - 表单提交
    - 列表滚动
    - 页面切换
- MDN 上 web 性能的定义
    - 网站或者应用程序的客观度量和可感知的用户体验
        - 减少整体加载时间: (减小文件体积, 减少 http 请求, 使用预加载)
        - 是网站尽快可用: (仅加载首屏内容, 其他内容根据需求懒加载)
        - 平滑和交互性: (使用功能css 代替 js 动画, 减少 UI 重绘)
        - 感知表现: 你的网页可能 不可能做的更快 但是使用 loading 动画, 进度条, 骨架屏 等提示  显得 有点快
        - 性能测定: 性能指标, 性能测试, 性能监控(多好才算好  多差才算差)
- 为什么要关注 web 性能
    - 用户留存率
    - 网站转化率
    - 体验和传播
    - 搜索排名
    - 客户投诉
    - 提升工作绩效(自己的)

- 如何进行 web 性能优化
    - 首先要了解性能指标: 多块才算快
    - 使用专业的工具可量化评估出网站或者应用的性能表现
    - 然后立足于网站页面响应的生命周期, 分析出造成较差性能表现的原因
    - 最后进行技术改造, 可行性分析工具等具体优化实时
    - 迭代优化

#### 性能指标
- RAIL 性能模型( Response, Animation, Idle(空闲), Load) Google Chrome 团队在 2015年提出的性能模型 用于提升浏览器的用户体验和性能
    - Response: 要尽可能的快, 100ms 以内(最起码要给个 loading 效果等)
    - Animation: 每帧 16ms (也就每秒60帧)进行渲染 这样可以保持动画的一致性 避免卡顿
    - Idle: 尽量不要有 大于 50ms 的长任务(长任务会造成阻塞)
    - Load: 首次5s 以后2s 的时间完成你的网站加载 并可以进行用户交互
- 基于用户体验的核心指标(google 制定的一些标准)
    - 首次内容绘制
    - 最大内容绘制: img 

- 新一代性能指标: Web Vitals (google 制定的一些标准)

#### 测量工具
- 浏览器 DevTools 调试工具
    - 网络监控分析
    - 性能监控分析

- 灯塔(Lighthouse)
    - 网站整体质量评估, 并给出优化建议

- WebPageTest
    - 多测试地点
    - 全面的性能报告

#### 优化方向
- 发送请求 到 收到响应的优化: DNS查询, HTTP长连接, HTTP2, HTTP 缓存等
- 关键渲染路径优化, 比如是否存在不必要的重绘和回流
- 加载过程的优化, 比如延迟加载 是否有不需要在首屏展示的非关键信息, 
- 资源优化, 比如 图片, 视频等不同的格式会有不同的使用场景, 
- 构建优化, 比如压缩合并, webpack 构建优化
